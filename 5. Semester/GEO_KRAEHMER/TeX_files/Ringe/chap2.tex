$R$ sie kommutativer Ring mit 1-Element und $V$ ein $R$-Modul.
\begin{erinnerung}
	Ist $X$ eine Menge, so kann man ein
	\begin{align*}
		R^X = \set{f\colon X \to R \mid f(x) = 0, \text{ für fast alle }x \in X}
	\end{align*}
	definieren Modul mit
	\begin{align*}
		+ \colon R^X \times R^X \to R^X \mit (f+g)(x) = f(x)+g(x)\quad x \in X, f,g \in R^X\\
		\cdot\colon R \times R^X \to R^X \mit (rf)(x) = r\cdot f(x)
	\end{align*}
	Ist $V$ ein $R$-Modul und $X \subseteq V$ ($X$ nicht unbedingt Untermodul), so erhält man einen Morphismus von $R$-Moduln ($R$-lineare Abbildungen)
	\begin{align*}
		S_x\colon R^X \to V \mit f \mapsto \sum_{x\in X}f(x)\cdot x
	\end{align*}
	Also ist $\Image(S_X)$ die Menge aller Linearkombinationen von Elementen von $X$, d.h. $\Span_R X$ bzw. der von $X$ erzeugte Untermodul von $V$. $X$ ist ein Erzeugendensystem von $V$, wenn $\Image(S_X) = V$ ist. Ein Modul heißt endlich erzeugt, wenn es ein $X \subseteq V$ mit $\Image(S_X) = V$ und $\abs{X} < \infty$.\\
	$X$ ist linear unabhängig, wenn $S_X$ injektiv ist, also $\ker S_X = 0$. Ist $S_X$ bijektiv, also $X$ ein linearer unabhängiges Erzeugendensystem, so nennt man $X$ Basis von $V$. Ein Modul $V$ der eine Basis enthält ist frei $V \cong R^X$. Also $R$ Körper $\implies$ Jeder Modul (= VR) ist frei und $R^X \cong R^V \Leftrightarrow \abs{X} = \abs{Y} = \dim R^X$
\end{erinnerung}
\begin{example}
	Sei $R = \Z$, dann $\Z$-Moduln sind abelsche Gruppen, also $(4x = x+x+x+x)$ durch $+$ in $V$ festgelegt. $V = \Z_2 = \lnkset{\Z}{2 \Z}, X = \set{1 + 2\Z} = \set{[1]}$ ist Erzeugendensystem (sogar minimal). Aber $X$ ist keine Basis, denn es ist nicht linear unabhängig, da $2 \cdot [1] = [0]$
\end{example}
\begin{definition}
	Ein $R$-Modul $V$ ist \begriff{projektiv} $\Leftrightarrow$ für jede Epimorphismus (surjektiv) $\alpha \colon M \to N$ von $R$-Moduln und jeden Morphismus $\gamma \colon V \to N$ gibt es einen Morphismus $\beta \colon V \to M$ mit $\alpha \circ \beta = \gamma$
	\[
		\begin{tikzcd}
		& V \arrow[ld, "\exists \beta"', dashed] \\
		M \arrow[r, "\alpha"', two heads] & N \arrow[u, "\gamma"', hook]          
		\end{tikzcd}
	\]
\end{definition}
\begin{proposition}
	\proplbl{prop_2_1_1}
	Für einen $R$-Modul $V$ sind äquivalent
	\begin{enumerate}
		\item $V$ ist projektiv
		\item Jeder Epimorphismus $\pi\colon M \to N$ ist \begriff{split}, d.h. $\exists \iota \colon V \to M$ mit $\pi \circ \iota = \id$ ($M,N$ $R$-Modul)
		\item Es existiert ein $R$-Modul $W$ mit $V \oplus W$, der frei ist
	\end{enumerate}
\end{proposition}
\begin{remark}
	$W \subseteq V$ ist Komplement zu $U \subseteq V \Leftrightarrow \pi \colon V \to \lnkset{V}{U}$ ist isomorph und $\pi_{\mid W}\colon W \to \lnkset{V}{U}$
\end{remark}
\begin{example}
	$\pi \colon \Z \to \Z$ splittet nicht als $\Z$-Modulmorphismus. Also ist $\Z_2$ nicht projektiv.
\end{example}
\begin{proof}[\propref{prop_2_1_1}]
	\begin{enumerate}
		\item 1 $\implies$ 2: Betrachte ($N = V$, $\gamma = \id_V$, $\alpha = \pi$)
		\[
			\begin{tikzcd}
			& V \arrow[ld, "\exists \iota"', dashed] \\
			M \arrow[r, "\pi", two heads] & N \arrow[u, "\gamma = \id_V"', hook]  
			\end{tikzcd}
		\]
		\item 2 $\implies$ 3: Jeder Modul $V$ hat ein Erzeugendensystem, z.B. $V = X$ selbst. $S_X\colon R^X \to V$ ist ein Epimorphismus ($R^X$ ist frei! $X$ ist Basis bzw. $\set{\delta_x}_{x \in X}$ ist Basis ($f = \sum_{x\in X} f(x)\delta_x$)). $V$ projektiv, existiert ein Splitting $\iota \colon V \to R^X$ mit $\pi \circ \iota = \id_X$, $\tilde{V} = \Image \iota$ ist dann ein Untermodul von $R^X$, der Isomorphismus zu $V$ ist. Betrachte nun $\epsilon = \iota \circ \pi \colon R^X \to R^X$. Dies ist ein idempotenter Morphismus, d.h. 
		\begin{align*}
			\epsilon \circ \epsilon &= (\iota \circ \pi)(\iota \circ)\\
			&= \iota \circ (\pi \circ \iota)\circ \pi\\
			&= \iota \circ \id \circ \pi = \epsilon.
		\end{align*}
		Somit gilt aber $R^X \cong \ker \epsilon \oplus \Image \epsilon \mit f \mapsto (f - \epsilon(f), \epsilon(f))$ und $\ker \epsilon \cap \Image \epsilon = 0$ % could be \emptyset is meant here ...
		$f = \epsilon(g), \epsilon(f) = 0$ heißt $\epsilon(\epsilon(g)) = \epsilon(g) = f$. Also gilt $\Image \epsilon = \Image \iota = \tilde{V} \cong V$. Denn $\epsilon(f) = (\iota \circ \pi)(f) = \iota(\pi(f))$, also $\Image \epsilon \subseteq \Image \iota$ und da $\pi$ surjektiv ist gilt Gleichheit. $V = \tilde{V}$, da $\iota$ injekti ist, da ($\pi \circ \iota = \id_V$) also $\ker \iota = 0$ und $V \cong \lnkset{V}{\ker \iota} \cong \Image \iota = \tilde{V}$. Also ist
		\begin{align*}
			V \oplus W \cong \tilde{V} \oplus W \mit W = \ker \epsilon
		\end{align*}
		\item 3 $\implies$ 1: Sei $V \oplus W \cong R^X$ frei und ein Diagramm der Form
		\[
			\begin{tikzcd}[ampersand replacement=\&]
			\& V \arrow[d, "\gamma"] \\
			M \arrow[r, "\alpha", two heads] \& N                    
			\end{tikzcd}
		\]
		folgt
		\[
			\begin{tikzcd}[ampersand replacement=\&]
			\& R^X \arrow[ld, "\exists \rho", bend right] \arrow[d, "\pi"] \\
			M \arrow[rd, two heads, bend right] \& V \arrow[d, "\gamma"]                                       \\
			\& N                                                          
			\end{tikzcd}
		\]
		($\alpha$ Epimorphismus $R^X = V \oplus W$, $\pi \colon R^X \to V$, 1. Komponente $V \cong \lnkset{R^X}{W}$)\\
		Für jedes Basiselement $\delta_x \in R^X (x \in X)$ existiert ein $m_x \in M$ mit $\alpha(m_x) = \gamma(\pi(\delta_x))$ (dann ist $\alpha$ surjektiv). Jetzt kommt die Freiheit: Jede Abbildung $\set{\delta_x}_{x \in X} \to M$ kann zu einer linearen Abbildung (eindeutig) $\begin{tikzcd}[cramped, sep=small]
		R^X \arrow[r, "\rho"] & M
		\end{tikzcd}$ festgesetzt werden.
		\begin{align*}
			\Mod_R(R^X, M) \cong \Set(X,M)
		\end{align*}
		Sprich $\exists! \rho \colon R^X \to M$ mit $\rho(\delta_x) = m_x$. Die Einschränkung von $\rho$ auf das Untermodul $V \subseteq R^X$ (bzw. wenn man die Einbettung $V \to R^X$) mit $\iota$ bezeichnet $\rho \circ \iota$)  liefert dies das gewünschte $\beta\colon V \to M$.
	\end{enumerate}
\end{proof}
\begin{example}
	$R \in C^{\infty}(\R, \R)$ stetige Funktion von $\R \to \R$, $S \subseteq \R$ Teilmenge, z.B. $S = [0,1]$,\\ $V = \set{f \in C^{\infty}(\R, \R) \mid f(x) = \text{ für }x \notin S}$ Untermodul von $R$ selbst ist, d.h. $V \lhd R$ ist Ideal und sogar Hauptideal.
	\begin{align*}
		V = p \cdot R, p = \chi_S, p(x) = \begin{cases}
		0 \quad x \notin S\\
		1 \quad x \in S
		\end{cases}\\
		p^2 = p, (1-p)^2 = (1-p) = \chi_{R \setminus S}
	\end{align*}
	damit ergibt sich $R = p \cdot R \oplus (1-p)R = V \oplus W$ 
\end{example}
\begin{erinnerung}
	\begin{itemize}
		\item Morphismus $R^n \to R^n$ ist gegeben durch Matrixmultiplikation. Die Projektion auf $V$ ($\epsilon \colon R^n = V \oplus W \to R^n \with (v,w) \mapsto v$) korrespondiert zu einer idempotenten Matrix. $e \in \Mat(n,R), e^2 = e$ und $V = e\cdot R = \set{e x \mid x \in R} = \Image(\epsilon)$. 
		\item projektiv gdw für alle Endomorphismen $\begin{tikzcd}[cramped, sep=small]
		M \arrow[r, "\pi"] & V
		\end{tikzcd}$ split, also $M \cong V \oplus \ker(\pi)$ ($V$ ist $\Image(\pi)$, Kern-Bild-Formel). Wenn $V$ endlich erzeugt ist $V = \Span\set{x_1, \dots, x_n}$
		\item $\pi \colon V \with (v_1, \dots, v_n)^T \mapsto \sum_{i=1}^n v_i x_i$ surjektiv. Also $V \cong \lnkset{R^n}{ker(\pi)}$
	\end{itemize}
\end{erinnerung}
\begin{example}
	Sei $R = \C$, dann
	\begin{enumerate}
		\item $\Z$-Modul ist abelsche Gruppe
		\item $\C(t)$-Modul ist $\C$-Vektorraum $V$ und $\C$-lineare Abbildung $\pi\colon V \to V$
	\end{enumerate}
	beide sind Hauptidealringe $(\Z, C(t))$ (HIR).
\end{example}
\begin{definition}
	$R$ ist ein HIR $\Leftrightarrow$ $R$ ist Integritätsbereich (eng. integral domain, nullteilerfrei) (ID) und jedes Ideal $I \lhd R$ ist ein Hauptideal, d.h. es existiert $a \in R$ mit
	\begin{align*}
		I = R \cdot a = \set{ra \colon r \in R} = \set{s \in R \colon a \mid s}
	\end{align*}
	($a \mid s$, entspricht $a$ teilt $s$)
\end{definition}
Ziel dabei ist: Endlich erzeugte Moduln über HIR haben eine Zerlegung (decompositon) $V = R \oplus T$ mit $F$ frei und $T$ Torsion.
\begin{definition}
	Sei $R$ ID, $V$ $R$-Modul
	\begin{enumerate}
		\item $x \in V$ ist ein Torsionselement $\Leftrightarrow \exists r \in R, r \neq 0, r\cdot x = 0$
		\item $T(V) = \set{x \in V \mid x \text{ ist Torsionselement}} \le V$
		\item $V$ ist torsionsfrei, wenn $T(V) = 0$
		\item Annihilator $\Ann_R (V) := \set{r \in R \mid rx = 0 \forall x \in V} \lhd R$
	\end{enumerate}
\end{definition}
\begin{example}
	\begin{enumerate}
		\item Da $R$ ID ist, ist ein freier Modul torsionsfrei:\\
		$f \in R^X, r \in R, r \neq 0, r \cdot f = 0$ heißt $(rf)(x) = r \cdot f(x) = 0 \forall x \in X \Leftrightarrow f(x) = 0 \forall x \in X$
		\item Ist $R = \Z$ und $V$ eine endliche abelsche Gruppe, so gilt $\abs{V}\cdot x = 0\quad \forall x \in V$ ($\ord(x) \mid \ord(V)$). Also ist $V = T(V)$.
	\end{enumerate}
\end{example}
\begin{*remark}
	$T(V) \le V$ ist Untermodul (Übung!)
\end{*remark}
\begin{lemma}\proplbl{2_2_1}
	$\lnkset{V}{T(V)}$ ist torsionsfrei. ($R$ ID für den Rest der heutigen VL :S)
\end{lemma}
\begin{proof}
	Sei $x \in \lnkset{V}{T}$ Torsionselement $x$ ist von der Form $x = [v] = v + T$ für ein $v\in V$. Setze $T := T(V)$ ,$x$ ist Torsionselement heißt: $\exists r \in R^{\times}\colon r \cdot x = 0$, d.h. $[rv] = [0]$, also ist $r \cdot v \in T$. Damit $\exists s \in R^{\times}\colon s(rv) = 0$ also $(sr)v = 0$. Da $R$ ID ist, ist $t:= sr \neq 0$, also ist $v \in T(V) = T$ und damit $[v] = x = 0$.
\end{proof}
\begin{lemma}
	Sind $N \le M$ Moduln, so gilt $M$ ist Torsions ($(M = T(M))$) $\Leftrightarrow N$ ist Torsion ($N = T(N)$) und $\lnkset{M}{n} = T\brackets{\lnkset{M}{N}}$.
\end{lemma}
\begin{proof}
	Analog zu \propref{2_2_1}.
\end{proof}
\begin{proposition}\proplbl{2_2_2}
	Sei $V$ endlich erzeugter, torsionsfreier $R$-Modul, $V = Span\set{x_1, \dots, x_n}$ und $V \neq 0$.
	\begin{enumerate}
		\item $\exists i_1, \dots, i_k \colon F = R\sum_{j=1}^k x_{i_j}$ ist frei mit Basis $\set{x_{i_1}, \dots, x_{i_k}}$
		\item $\lnkset{V}{F}$ ist Torsionsmodul: $\lnkset{V}{F} = T\brackets{\lnkset{V}{F}}$
		\item Existiert ein Morphismus, der injektiv ist $L \colon \begin{tikzcd}[cramped, sep=small]
		V \arrow[r, hook] & F
		\end{tikzcd}$
	\end{enumerate}
\end{proposition}

\begin{proof}
	Induktion nach $n$: (Beweis die ersten zwei Aussagen)
	\begin{itemize}
		\item $n=1$: $V = R\cdot x \cong R$, da torsionsfrei, $V = Rx$ heißt es existiert ein Endomorphismus $\pi\colon R \to V \mit r \cdot x$ und wenn $x$ kein Torsionselement ist, ist $\ker \pi = 0$ ($\not \exists r \neq 0 \colon rx = 0$, also ist $\pi$ isomorph) und damit gilt \propref{2_2_2}.
		\item $n-1 \to n$: OBdA ist $\set{x_1, \dots, x_n}$ keine Basis, sonst wären wir fertig. (Mit $F = V$). Also existiert eine Linearkombination $0 = \sum_{i=1}^n r_i x_n$ oBdA mit $r \neq 0$, d.h. $\exists r = r_n \in R \setminus{0}$ mit $r\cdot x_n \in \Span\set{x_1, \dots, x_{n-1}} := W$.\\
		Behauptung: $\lnkset{V}{W}$ ist Torsion: Denn ein Element in $\lnkset{V}{F}$ ist von der Form: $[s x_n] = s[x_n]$ und $r[s x_n] = s[r x_n] = 0$, da $r x_n \in W$, also $[r x_n] = 0$ in $\lnkset{V}{W}$. Nach Induktionsannahme existiert Teilmenge $B \subseteq \set{x_1, \dots, x_{n-1}}$, die einen freien Untermodul $G \subseteq W$ aufspannt und $\lnkset{W}{G}$ ist Torsion. Nach dem 3. Isomorphiesatz gilt:
		\begin{align*}
			\lnkset{\lnkset{V}{G}}{\lnkset{W}{G}} \cong \lnkset{V}{W}
		\end{align*}
		Also ist $\lnkset{V}{G}$ ein Torsionmodul ($\lnkset{W}{G}$ Torsion, $\lnkset{V}{W}$ und \propref{2_2_1}) und damit haben wir $F = V$.
		\item Nun zu der 3. Aussage: Da $\lnkset{V}{F}$ Torsion ist existiert für jedes $x_i$ ein $r_i \in R\setminus{0}$ mit $r_i x_i \in F$, $r_i[x_i] = [r_i x_i] = [0] \Leftrightarrow r_i x_i \in F$. Sei $r := \prod_{j=i}^n r_j \neq 0$. Definiere $L\colon V \to F \mit x \mapsto rx$. Da $R$ kommutativ ist, ist $L$ $R$-linear. Da $V$ torsionsfrei ist, ist $L$ injektiv. Das Bild ist in $F$, da $V = \Span_R\set{x_1, \dots, x_n}$ und
		\begin{align*}
			r\brackets{\prod_{j=1}^n r_j x_j} = \prod_{j=1}^n r_j = a_1 r_2\cdots r_n (\underbrace{r_1 x_1}_{\in F}) + a_2 r_1 r_3 \cdots r_n(\underbrace{r_2 x_2}_{\in F}) + \dots \in F.
		\end{align*}
	\end{itemize}
\end{proof}
\begin{conclusion}
	Sei $V$ endlich erzeugter $R$-Modul. Entweder ist $V$ Torsion, $V = T(V)$ oder $V$ enthält einen freien Untermodul $F$ mit $\lnkset{V}{F}$ Torsion.
\end{conclusion}
\begin{proof}
	$V = T(V)$ ist schon fertig.\\
	Anderfalls ist $V/T(V) \neq 0$ torsionsfreier, endlicher erzeugter Modul und es existiert ein freier Modul $G \le V/T(V) \mit \lnkset{(\lnkset{V}{T(V)})}{G}$ Torsion ($\alpha$). Nach Korrespondenztheorem korrespondiert $G$ zu einem Untermodul $H \le V$, $H \ge T = T(V)$, das heisst $G \cong H/T$. Da $G$ frei und somit projektiv, splittet dieser Quotient und wir können $G$ als Untermodul in $H$ realisieren $H \cong G \oplus G/T$. Damit ist $V/G$ also unser freier Untermodul und $V/G$ ist Torsion da ($\alpha$) gilt und $T$ Torsion.
\end{proof}
\begin{conclusion}
	Endlich erzeugte freie Moduln sind isomorph zu $R^d$, wobei $d$ die Kardinalität der Basis ist.
\end{conclusion}
\begin{conclusion}
	Aus frei folgt projektiv.
\end{conclusion}
Ab hier: $R$ ist HIR bzw. PID (Integritätsbereich bzw. integral domain)
\begin{example}
	\begin{itemize}
		\item Sei $R$ Körper $\F$, dann hat nur die trivialen Ideale $0$ und $\F$
		\item Sei $R = \Z$ (ord $\abs{\cdot}$), $R = \F[t]$ (Grad = deg), dann sind das euklidische Bereiche (teilen mit Rest möglich)
	\end{itemize}
\end{example}
\begin{erinnerung}
	In HIR sind für $a \in R^{\times}$, die folgenden Aussage sind äquivalent:
	\begin{enumerate}
		\item $a$ ist irreduzibel, d.h. $\forall b,c \in R \colon a = b\cdot c \implies b \oder c \in R^{\times}$
		\item $a$ ist prim, d.h. $\forall b,c \in R \colon a \mid bc \implies a \mid b \oder a\mid c$ (Es gilt: prim impliziert irreduzibel, gilt in allen kommutativen Ringen - Beweis: $a = ub$ für ein $u \in R^{\times}$ impliziert $a \mid b$ und $b\mid a$ und daraus $Ra = Rb$)
		\item $Ra = \set{b \in R \mid a \mid b} = \set{ac \mid c \in R} \lhd R$ ist maximales Ideal, d.h. $\lnkset{R}{Ra}$ ist Körper.
	\end{enumerate}
\end{erinnerung}
\begin{example}
	\begin{itemize}
		\item Sei $R = \Z, a = 7$ dann folgt $\Z_7 = \lnkset{\Z}{7\Z}$ Körper
		\item Sei $R = \Q[t]$, $a = t^2 -3$, dann folgt $\lnkset{R}{aR} = \Q(\sqrt{3})$, wobei $[t] = t + aR = \sqrt{3}$
	\end{itemize}
\end{example}
\begin{definition}
	Zwei Elemente $a,b \in R$ (Integritatätsbereich) sind assoziert genau, dann wenn gilt
	\begin{align*}
		\exists u \in R^{\times}\colon a = ub \Leftrightarrow Ra = Rb \quad (a \sim b)
	\end{align*}
\end{definition}
\begin{lemma}
	Sind in $R$ alle irreduziblen Elemente prim, so folgt die Eindeutigkeit der Primfaktorzerlegung aus der Existenz einer Zerlegung.
\end{lemma}
\begin{proof}
	Sei $p_1 \dots p_d = q_1\dots q_r$ mit $r$ minimal und oBdA $p \nmid q_j$ für alle $j$. Dann $p_1 \mid ab$ mit $a = q_1,b=q_2\dots q_4 \xRightarrow{\text{irr $\implies$ prim}} p_r \mid q_1$ oder $p_1 \mid q_2 \dots q_r$. Wenn $p_1 \mid q_1$, also $q_1 = u p_1$ dann folgt, das $q_i$ irreduzibel und invertierbar, also $p_1 \sim q_1$ ist Widerspruch! Ansonsten induktiv weiter: $p_1\mid q_2 \dots q_r \implies p_1 \mid q_i$ für ein $i$ (weil prim),
\end{proof}
\begin{lemma}
	In einem HIR ist jedes $a \in R$ Produkt von irreduziblen Elementen.
\end{lemma}
\begin{proof}
	\begin{itemize}
		\item Sei $R = \Z, a = 7$ dann folgt $\Z_7 = \lnkset{\Z}{7\Z}$ Körper
		\item Sei $a$ nicht irreduzibel, dann folgt $a = a_1 a_2 \dots$ mit $a_1, a_2$ nicht invertierbar. Wenn beide $(a_1,a_2)$ als $a_1=p_1\dots p_d, a_1 = q_1\dots q_r$ mit $p_i, p_j$ irreduzibel dargestellt werden können, so auch $a = p_1 \dots p_q q_1 \dots q_r$ \checkmark\\
		Wenn nicht ist oBdA $a_2$ nicht irreduzibel, $a_2 = a_3 a_4 \dots$\\
		$a = a_1 a_2 = a_1 a_3 a_4 = a_1 a_3 a_5 a_6  = \dots $ Also $Ra \subseteq Ra_2 \subseteq Ra_4 \subseteq Ra_6 \subseteq \dots$ Folge von Idealen. Setze $I := \bigcup Ra_{2i} \lhd R$. Da $R$ HIR, ist $I = xR$ für ein $x \in I$, d.h. $x \in Ra_{2i}$ für ein $i$ und $Ra_{2i} \subset X = Rx$, also $a_{2i} \sim x$ und damit $Ra_{2i} = Ra_{2i + 2} = \dots = Rx$. Somit ist $a_{2i + 2}$ invertierbar, was ein Widerspruch ist!
	\end{itemize}
\end{proof}
\begin{conclusion}
	Jeder HIR ist faktoriell. (Folgerung aus vorherigen Satz)
\end{conclusion}
\begin{proposition}
	\proplbl{chap2_2_2_base_modul}
	Sei $F$ endliche erzeugter freier $R$-Modul mit Basis von $n$ Elementen und $R$ ist HIR. Dann ist jeder Untermodul $G \le F$ auch frei mit einer Basis von höchstens $n$ Elementen.
\end{proposition}
\begin{proof}
	Induktion über $n$. Sei $\set{x_i}_{1,\dots,n}$ Basis von $F$.
	\begin{enumerate}
		\item $n=1$: $F\cong Rx$, ist isomorph als Modul zu $R$ selbst, die Abbildung 
		\begin{align*}
			\varphi\colon R \to F \mit a \mapsto ax
		\end{align*}
		ist Isomorphismus, da $R$ nullteilerfrei ist.
		\item $n-1 \to n$: $F = \bigoplus_{i=1}^n Rx_i$ und wir betrachten die letzte Koordinate $\Phi_n\colon R \to R \mit \sum_{i=1}a_i x_i \mapsto a_n$. Diese Abbildung ist ein R-Moduln-Morphismus. Also $\Phi_n \in F^X = \Mod_R(F,R)$. Sei $G \le F$. Falls $G \le \Span_R\set{x_i}_{1,\dots,n-1} = \ker \Phi_n$. Dann ist $G$ nach Induktionshypothese frei mit höchstens $n-1$ Erzeugern \checkmark.\\
		Wenn nicht: $\Phi_n(G) \neq 0$, $\Phi_n(G) \lhd R$ ist ``endlicher'' Modul. Dann folgt Fall $n=1$, also ist $\Phi_n(G)$ frei und Basis aus genau einem Element. Nach 1. Isomorphiesatz haben wir
		\begin{align*}
			\lnkset{G}{\brackets{G\cap \ker \Phi_n(G)}} \cong \Phi_n(G) \cong R \quad \text{validate!!!}
		\end{align*} 
		Da $R$ frei $\implies$ projektiv $\implies$ $G \cong G \cap \ker \Phi_n(G) \oplus R$. $G \cap \ker \Phi_n(G)$ ist Untermodul von $\ker \Phi_n(G)$, also frei mit höchstens $n-1$ Erzeugern.
	\end{enumerate}
\end{proof}
\begin{conclusion}
	Ist $M$ ein endlich erzeugter $R$-Modul, so gilt $M \cong F \oplus T(M)$, $T(M)$ Untermodul aller Torsionselemente und $F$ frei.
\end{conclusion}
\begin{proof}
	Setze $T(M) = \set{x \in M \mid \exists a \in R^{\times}\colon ax = 0}$. Dann ist $M/T(M)$ torsionsfrei und Untermodul eines freien endlichen erzeugten $R$-Moduls und nach \propref{chap2_2_2_base_modul} ist $M/T$ ebenfalls frei, somit auch projektiv und es gilt
	\begin{align*}
		M \cong T \oplus \underbrace{M/T}_{=: F}
	\end{align*} 
\end{proof}
\begin{conclusion}
	Sei $M = \Span_R\set{x_1, \dots, x_d}$ endlich erzeugter $R$-Modul. Sei $0 \neq N \le M$. Dann existierten $y_1, \dots, y_d$ mit $N = \Span_R\set{y_1, \dots, y_r}_{r \le d}$.
\end{conclusion}
\begin{proof}
	Setze $M = \Span_R\set{x_1, \dots, x_d}$ heißt existiert Epimorphismus (surjektive linear Abbildung) durch 
	\begin{align*}
		S\colon R^d \to M \mit (a_1, \dots, a_d)^T \mapsto \sum_{i=1}^d a_i x_i
	\end{align*}
	Sei $F\colon S^{-1}(N) \le R^d$ das Urbild von $N$ und
	\begin{align*}
		F = \set{(a_1, \dots, a_d)^T \mid \sum_{i=1}a_i x_i \in M}
	\end{align*}
	Satz impliziert $F$ frei mit Basis aus höchstens $d$ Elementen $v_1, \dots, v_r$. Setze nun $y_i := S(v_i)$.
\end{proof}
Wie sehen Torsionsmoduln über PIDs = HIRs aus?
\begin{definition}
	Sei $M$ $R$-Modul ($R$ HIR), $p \in R$ prim. Die $p$-primäre Komponente von $M$ ist
	\begin{align*}
		M(p) := \set{x \in M \mid \exists n \ge 0, p^n x = 0}
	\end{align*}
\end{definition}
\begin{remark}
	$px = 0, x \neq 0$, dann $(Rp)x = 0 \Leftrightarrow Rp \subset \Ann_R(x) = \set{a \in R \colon ax = 0}$. Sei $p$ prim $\Leftrightarrow Rp$ maximal, d.h. $px = 0 \Leftrightarrow Rp = \Ann_R(x)$. Dann $R/Rp = K$ ist dann Körper, $\langle x \rangle = Rx \le M$, ist zu Körper ismorph. Setze $\varphi\colon R \to M \mit a \mapsto ax$, $\Image \varphi = Rx$, $\ker \varphi = \Ann_R(x) = Rp \implies Rx \cong K$.
\end{remark}
\begin{proposition}
	Ist $M$ endlich erzeugter Torsionsmodul über $R$, so existieren $p_1, \dots, p_d$ prim in $R$ mit $Rp_i \neq Rp_j$ und $M = \bigoplus_{i=1}^d M(p_i)$.
\end{proposition}
\begin{proof}
	Wenn $M = 0$ oder $M = M(p)$ \checkmark.\\
	Nehme also an, das $M \neq 0$, $M \neq M(p)$ für alle $p \in R$ prim. TODO still
\end{proof}
three lectures missing :/
\begin{theorem}
	$M(p) = M_1 \oplus \cdots \oplus M_k$ mit $M \cong \lnkset{R}{Rp^n_i}$ zyklisch und $\Ann_R(x) = \set{a \in R \mid ax = 0} \lhd R$
\end{theorem}
\begin{*remark}
	Also sieht das so aus
	\begin{align*}
	M = R^s \oplus \brackets{\bigoplus_{i=1}^n \lnkset{R}{Rp_i^{m_i}}}
	\end{align*}
	mit $p$ prim und $m_i \ge 0$
\end{*remark}
\begin{proof}
	Induktion nach Zahl $t$ der Erzeuger $m_1, \dots, m_t$ von $M=M(p)$. Wir sind im Induktionsschritt und haben $n_1,\dots, n_t$ gewählt mit $\Ann_R(m_i) = Rp^{n_i}$, d.h. $n_i = \min\set{n \in \N \mid p^n m_i = 0, p^{n-1}m_i \neq 0}$, also
	$n = \max\set{n_1, \dots, n_t}$, oBdA $n = n_1$. Dann gilt insbesondere $p^n x = 0$ für alle $x \in M$.\\
	\ul{Trick} Betrachte $\lnkset{M}{Rm_1}$. Dies ist ein $t-1$ erzeugter $p$-primärer $R$-Modul, also zieht die Induktionsannahme. Also ist $\lnkset{M}{R m_i} = R \cdot \bigoplus_{i=1}^k[x_i]$, wobei $[x_i] = x + Rm_i \subset \lnkset{M}{R m_i}, x_i \in M$ und $\Ann_R([x_i]) = Rp^{s_i}$. Sei $a \in \Ann_R([x_i]) \Leftrightarrow a[x_i] = 0$ in $\lnkset{M}{Rm_i} \Leftrightarrow [ax_i = 0]$ in $\lnkset{M}{Rm_i} \Leftrightarrow ax_i \in Rm_i$. Also haben wir $p^{s_i}x_i = r_i m_1$ ($\ast$) für irgendwelche $r_1, \dots, r_k \in R$.\\
	Erinnerung: $p^n x_i = 0$ (denn $p^n \in \Ann_R(M)$), daraus folgt $r_i = r'_i \cdot p^{s_i}$. Setze $y_i := x_i - r'_i m_1$. Dann ist $[x_i] = [y_i]$. Dann gilt $p^{s_i}y_i = p^{s_i}x_i - p^{s_i}r'_i m_1 = p^{s_i}x_i - r_i m_1 \overset{(\ast)}{=} p^{s_i} x_i - r_i m_1 = 0$. Betrachte $p^{s_i -1}y_i = p^{s_i - 1}x_i - p^{s_i - 1}r'_i m_1 \neq 0$, denn ansonsten wäre $p^{s_i - 1}x_i \in Rm_1$, also $p^{s_i - 1} \in \Ann_R([x_i]) = Rp^{s_i}$. Also ist $\Ann_R(y_i) = \Ann_R([y_i]) = Rp^{s_i}$, wobei $\Ann_R(y_i)$ in $M$ und $\Ann_R([y_i])$ in $\lnkset{M}{Rm_1}$ betrachtet wird. Es gilt nun
	\begin{align*}
	\lnkset{M}{Rm_1} = R \bigoplus_{i=1}^n [y_i]
	\intertext{also}
	M = Rm_1 + Ry_1 + \dots + Ry_k
	\end{align*}
	Es blibt noch zu zeigen, das die Summe direkt ist! Setze $y_0 := m_1$. Sei $x \in Ry_i \cap \sum_{j\neq i} Ry_j$, dann ist zu zeigen, dass $x = 0$ ist. Also existiert $s_0, \dots, s_k \in R$, sodass $x = (-s_i y_i) = \sum_{j\neq i}s_j y_j$, daraus folgt $\sum_{j=0}^k s_j y_j = 0$. Insbesondere gilt dies modulo $Rm_1$:
	\begin{align*}
	s_1[y_1] + \cdots + s_k [y_k] &= 0 \quad ([y_0] = [m_1] = 0)\\
	[s_1 y_1 + \cdots + s_k y_k] &= 0
	\end{align*}
	Aber:
	\begin{align*}
	\lnkset{M}{R m_1} = R\bigoplus_{i=1}^k [y_i]
	\end{align*}
	hier eine direkte Summe. Also gilt schon $[s_j y_j] = 0$ für jedes $j = 1, \dots, k$ allein. Also $s_j \in \Ann_R([b_j]) = \Ann_R(b_j)$ (``Das war der Witz!'' $\implies x = 0$) und $s_j y_j = 0$ für $j \ge 1$.
\end{proof}
\begin{proposition}
	Ist $M$ ein endlich erzeugter Modul über einem HIR $R$, so existieren $s, s_1, \dots, s_k \in \N$ und $p_1, \dots, p_k \in R$ prim mie 
	\begin{align*}
	M \cong R^s \oplus \brackets{\bigoplus_{i=1}^k \lnkset{R}{Rp_i^{s_i}}}
	\end{align*}
	Anders gesagt: Es existiert Erzeuger $e_1, \dots, e_{s+k}$ in $M$ mit $\sum_{i=1}^{s+k} r_i e_i = 0 \Leftrightarrow r_i e_i = 0$ für alle $i$ genau, dann wenn $r_1 = \dots = r_s = 0$ und $r_{s+j} \in Rp_j^{s_j}$ für $j = 1, \dots, k$. 
\end{proposition}
\begin{example}
	\begin{itemize}
		\item $R = \Z$, dann folgt $R$-Moduln sind dasselbe wie abelsche Gruppen. Also erhalten wir eine Klassifikation der endlich erzeugten abelschen Gruppen. Hier ist $R^s = \Z^s, \lnkset{R}{Rp_j^{s_j}} = \Z_{p_j^{s_j}}$. Also $\Z_p \times \Z_q \cong \Z_{pq}$ (Chinesischer Restsatz!). Insbesondere haben wir alle endlichen abelschen Gruppen klassifiziert! (endlich $\Leftrightarrow s = 0 \Leftrightarrow M$ ist Torsion)
		\item Abelsche Gruppe der Ordnung 6. Gibt es nur eine $\Z_6 \cong \Z_2 \times \Z_2$, andererseits Ab. Gruppe der Ordnung 4. Gibt es zwei! $\Z_4 \not\cong \Z_2 \times \Z_2$. Also
		\begin{align*}
		\abs{\bigtimes_{i=1}^k\Z_{p_i^{s_i}}} = \abs{\Z_{p_1^{s_1}}} \cdots \abs{\Z_{p_n^{s_n}}} = p_1^{s_1} \cdots p_k^{s_k}
		\end{align*}
	\end{itemize}
\end{example}
\section*{Polynomring als $R$-Modul}
\begin{example}
	Sei $R = K[t]$, $K$ Körper, $K[t] = \set{f \colon \N \to K \mid f(n) = 0 \text{ für fast alle }n}$. Wir schreiben $f$ auch als $f = \sum_{i=0}^{\infty} f(i)t^{i}$. Mit folgenden Eigenschaften
	\begin{itemize}
		\item $(f\cdot g)(n) = \sum_{i=0}^n f(i)g(n-i)$
		\item $(f+g)(n) = f(n) + g(n)$
	\end{itemize}
	Haben gezeigt, dass $R$ HIR ist. $R$-Moduln sind die dieselben wie $K$-Vektorräume $M$ mit einem gewählten Endomorphismus ($K$-linearen Abbildungen) $\tau \colon M \to M$.Denn:\\
	$K \le R$ (eingebettet als die $f$ mit $f(n) = 0, n > 0$, d.h. die ``konstanten'' Polynome vom Grad $\deg f = \max\set{n \mid f(n) \neq 0} = 0$)
	\begin{align*}
		f = f(0)t^0 + 0t^1 + 0t^2 + \dots 
	\end{align*} 
	Also wir ein $R$-Modul $M$ uch ein $K$-Modul=$K$-Vektorraum und Multiplikation mit $t$ definiert eine $K$-lineare Abbildung $\tau \tau \colon M \to M \mit m \mapsto tm$ und umgekehrt liegt der Vektorraum und $\tau$ den Modul fest:
	\begin{align*}
		fm &:= f(\tau)(m) \mit f(\tau) = \sum_{i=0}^{\infty}f(i)\tau' \subset \Vect(M,M)
	\end{align*}
\end{example}
\begin{proposition}
	Ein endlich erzeugter $R$-Modul ist Torsionsmodul $\Leftrightarrow \dim_K M < \infty$
\end{proposition}
\begin{proof}
	Sei $M$ endlich erzeugt, dann haben wir
	\begin{align*}
		M \cong R^{n_0} \oplus \lnkset{R}{Rp_{1}^{n_1}} \oplus \cdots \oplus \lnkset{R}{Rp_{d}^{n_d}}
	\end{align*}
	$\dim_K R^{n_0} = \infty$ für $n_0 > 0$, dann $\dim_K R = \infty$, da $\set{t^0, t^1, t^2, \dots}$ ist Basis und $\dim_K M = \infty$, falls $n_0 > 0$. Umgekehrt ist $\dim_K M < \infty$, so ist $\chi_{\tau} = 0$ in $\Vect(M,M)$ (``$\tau$'' erfüllt sein eigenes charakteristisches Polynom $\chi_{\tau} = \det(\tau - t\id_M)$. Abstrakter: Für den $R$-Modul $M$ gilt
	\begin{align*}
		\set{a \in R \mid ax = 0 \forall x \in M} = \Ann M = R \cdot \chi_{\tau}
	\end{align*}
	Also ist jedes $x \in M$ Torsion, denn $\chi_{\tau} x = 0$. Also Lineare Algebra ist also Theorie der endlichen Torsionsmoduln über $R = K[t]$.
	\begin{align*}
		M \cong \lnkset{R}{Rp_{1}^{n_1}} \oplus \cdots \plus \lnkset{R}{Rp_{d}^{n_d}}
	\end{align*}
	\begin{itemize}
		\item Wann ist $p \in R = K[t]$ prim = irreduzibel? Allgemein: Schwer!!! Polynome vom Grad 1 sind immer $f = t-\lambda$, $\lambda \in K$, aber $t^2 +1$ ist irreduzibel in $\Q[t]$ oder $\R[t]$, $t^2+2$ ist irreduzibel in $\Q[t]$, reduzibel in $\R[t]$. Leicht ist aber dagegen, wenn $K = \bar{K}$ algebraisch abgeschlossen (z.B. $K = \C$), so ist $f \in K[t]$ irreduzibel genau dann, wenn $f = t - \lambda$ mit $\lambda \in K$. Also jetzt $K = \bar{K}$
		\begin{align*}
			\lnkset{R}{Rp_{j}^{n_j}} \cong \lnkset{K[t]}{(t-\lambda_j)^{n_j}K[t]} \quad \text{ für ein }\lambda_j \in K
		\end{align*}
		Als Vektorraum über $K$ hat dieser Modul die Basis
		\begin{align*}
			e_r &:= (t-\lambda_j)^r + (t-\lambda_j)^{n_j}K[t] = [(t-\lambda_j)^r]_{r = 0, \dots, n_j -1}\quad e_r := (t-\lambda_j)^r + (t-\lambda_j)^{n_j}K[t]\\
			&= [(t-\lambda_j)^r]_{r = 0, \dots, n_j -1}$ (\person{Taylor}).
		\end{align*} 
		Nun $\tau(e_r) = te_r = \lambda_j e_r + e_{r+1}$ ($r < n_j -1$) bzw. $t e_{n_j - 1} = \lambda_j e_{n_j -1}$
		\begin{align*}
			(t-\lambda_j)e_r = \begin{cases}
			e_{r+1} \quad & r<n_j -1\\
			0 \quad & r = n_j -1
			\end{cases}
		\end{align*}
		denn $e_r = [(t-\lambda_j)^r]$ also $(t - \lambda_j)[(t-\lambda_j)^r] = [(t-\lambda_j)^{r+1}]$. Bezüglich der Basis $e_0, \dots, e{n_j -1}$ hat $\tau_{\mid S}$ mit $S = \lnkset{R}{Rp_j^{n_j}}$ also die darstellende Matrix
		\begin{align*} %TODO fix matrix!!!
			\begin{pmatrix}
			\lambda_j & & & & & \\
			1 &\lambda_j & & & &\\
			0 &1 &\lambda_j & & &\\
			& & & 1&\lambda_j\\
			\end{pmatrix} = \diag(\lambda_j, \dots, \lambda_j)
		\end{align*}
		und Nebendiagonale mit 1en ... Die zyklischen primären Komponenten sind also die Jordanblöcke von $\tau$.
	\end{itemize}
\end{proof}